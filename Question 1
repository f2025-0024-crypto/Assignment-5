#include <iostream>
#include <vector>
#include <fstream>
using namespace std;

// Step 1: Define the structure
struct Employee {
    int id;
    string name;
    float monthlySalary;
};

int main() {
    int n;
    float threshold;

    // Step 2: Vector to store employees
    vector<Employee> employees;

    // Step 3: Input employee data
    cout << "Enter number of employees: ";
    cin >> n;

    for (int i = 0; i < n; i++) {
        Employee e;
        cout << "\nEnter Employee ID: ";
        cin >> e.id;
        cout << "Enter Employee Name: ";
        cin >> e.name;
        cout << "Enter Monthly Salary: ";
        cin >> e.monthlySalary;

        employees.push_back(e);
    }
    
    cout << "\nEnter yearly salary threshold: ";
    cin >> threshold;

    // Step 5 & 7: Write to file with error handling
    ofstream fout("high_salary.txt");

    if (!fout) {
        cout << "Error opening file for writing.\n";
        return 1;
    }

    // Step 4 & 5: Calculate yearly salary and write filtered data
    for (int i = 0; i < employees.size(); i++) {
        float yearlySalary = employees[i].monthlySalary * 12;

        if (yearlySalary > threshold) {
            fout << employees[i].id << " "
                 << employees[i].name << " "
                 << yearlySalary << endl;
        }
    }

    fout.close();
    cout << "\nHigh salary employees saved to file.\n";

    // Step 6 & 7: Read from file
    ifstream fin("high_salary.txt");

    if (!fin) {
        cout << "Error opening file for reading.\n";
        return 1;
    }

    cout << "\n--- Employees with High Yearly Salary ---\n";
    int id;
    string name;
    float yearlySalary;

    while (fin >> id >> name >> yearlySalary) {
        cout << "ID: " << id
             << ", Name: " << name
             << ", Yearly Salary: " << yearlySalary << endl;
    }

    fin.close();

    return 0;
}
